---
layout: post
title: 写了十几年代码，聊聊我用 AI 编程的六个野路子
tags: [AI, vibe-coding, Claude Code, 知乎]
---

# 你用AI有哪些独门功夫？

写了十几年代码，去年开始基本全靠 AI 干活。做了好几个项目上线，包括一个开源通知网关和一套自动化工具链。

说几个我自己摸出来的野路子，不保证通用，但确实好使。

## 一、Git 刹车系统

AI 写代码最大的坑不是写不好，是写太快。

一句话它能改二十个文件。改完你都不知道它碰了哪儿。一旦炸了，你连回退到哪个版本都找不着。

所以我每次让 AI 动手之前，必做一件事：

```bash
git add -A && git commit -m "checkpoint before AI"
```

改完之后：

```bash
git diff --stat
```

先看它改了几个文件。超过 5 个？我就紧张。超过 10 个？直接 `git stash`，让它分步来。

这招看着土，但救过我无数次。踩过一次"AI 把整个项目结构重构了然后跑不起来"的坑之后，我就再没省过这一步。

## 二、让 AI 先写计划再动手

直接说"帮我做个 XXX"，AI 会立刻开始写代码。问题是它理解的 XXX 和你想的 XXX 大概率不一样。

我现在的套路是先让它输出一个 `tasks.md`：

> "先别写代码。把你的实现计划写成一个任务清单，每个任务不超过 50 行改动，标明改哪些文件。"

然后我过一遍清单，划掉不对的，补上漏的。确认了再让它一个个执行。

听起来麻烦？反正比"AI 改了一堆然后花两小时 debug"要省时间。

## 三、多模型交叉验证——专治幻觉

AI 最坑的不是犯错，是犯错的时候特别自信。

写个 API 调用，参数名瞎编一个，你问它对不对，它说"对的这是标准用法"。你去查文档，压根没这个参数。

我的办法：写完让另一个模型审。Claude 写的让 GPT 审，GPT 写的让 Qwen 审。

不是说另一个模型一定对，但两个模型犯同一个错的概率低很多。特别是 API 调用、配置文件这类东西，交叉验证能抓出一大半幻觉。

## 四、"抄"出底盘

这个是我做 vibe-coding 最核心的心得。

不要从零开始让 AI 写项目。找一个结构好的开源项目，`git clone` 下来，让 AI 在这个基础上改。

我自己写了个开源项目 Orion（通知网关），后来做新项目的时候，直接让 AI：

> "参考 Orion 的项目结构，搭一个类似的脚手架。后端 FastAPI + SQLAlchemy，前端 Next.js，Docker Compose 一键起。"

AI 有了参照物，写出来的东西质量高一个档次。没参照物的时候它容易东一榔头西一棒子，结构全凭心情。

## 五、AGENTS.md——给 AI 一份"员工手册"

这是我觉得最反直觉但效果最好的一招。

在项目根目录放一个 `AGENTS.md`，写清楚：

- 项目目录结构
- 代码风格要求
- 提交规范
- 哪些文件不能碰

然后每次开新对话，先让 AI 读这个文件。

效果是 AI 写出来的代码风格统一了，不会今天 camelCase 明天 snake_case。提交信息也规范了，不会写一堆"fix bug""update code"这种废话。

说白了就是——你不告诉 AI 规矩，它就自由发挥。自由发挥的结果就是一团糟。

## 六、Chrome 自动测试

这个比较小众，但真的爽。

用 Chrome MCP（或者类似的浏览器自动化工具），让 AI 写完功能之后自己测。不是单元测试——是打开浏览器、点按钮、填表单、检查页面内容。

AI 写完一个登录功能：

> "现在用浏览器测一下。打开 localhost:3000，输入测试账号，点登录，告诉我跳转到了哪个页面。"

它自己测，自己发现 bug，自己修。整个闭环不需要你动手。

---

以上这些招数有个共同点：**不是在教 AI 怎么写代码，是在教你怎么管 AI**。

AI 是个能力很强但完全没有自制力的员工。你不给它装刹车，它能把你项目开进沟里；你不给它写规范，它交付的东西你自己都看不懂。

管好了，生产力翻几倍不夸张。管不好，时间全花在给它擦屁股上。

反正我现在的状态是：写代码的时间少了 80%，review 代码和写规范的时间多了 200%。总体算下来，效率大概是以前的三倍。

对了，上面说的这些招数我写了个系列博客叫"vibe-coding 九阳神功"，感兴趣的可以去看看：[yfge.github.io](https://yfge.github.io)

> 原文发布于知乎：[写了十几年代码，聊聊我用 AI 编程的六个野路子](https://zhuanlan.zhihu.com/p/2010550423140970606)
