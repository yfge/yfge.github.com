---
layout: post
title: 写了十几年代码，说说 AI 工具到底怎么提高编码效率的
tags: [AI, vibe-coding, Claude Code, 工作流, 编程效率]
---

先给个反直觉的结论：AI 工具把编码效率提高了多少，取决于你有多舍得放弃"写代码"这件事本身。

这话听起来奇怪，但我是认真的。

我写了十几年代码，过去一年用 Claude Code 做了好几个真实上线的项目。包括一个统一通知网关（开源项目 Orion）、一个 AI Agent 技能目录站（agentskill.work，半天上线）、还有一套自动化内容流水线。

效率确实提高了。但不是因为"写代码更快"。

---

## 真正的效率提升来自角色转变

以前我的时间分配大概是：
- 写代码：60%
- 调 bug：25%
- 想架构：15%

现在：
- AI 写代码：AI 干，我看
- 调 bug：10%（大部分让 AI 修）
- 想架构/审查/验证：80%

这才是 AI 工具最核心的价值——不是让你写代码更快，而是让你可以不用写，然后把时间挪到更值钱的地方。

听着是不是很美好？但这里有个巨大的坑。

---

## 坑：不会控场，AI 越快你死得越惨

很多人第一次用 Claude Code 或者 Cursor 写了个能跑的 Demo，觉得"卧槽这也太强了"。

然后开始让它写更复杂的项目。

然后就出事了。

AI 改了三十个文件，你不知道改了什么。出了 bug 不知道是哪步引入的。想回滚，发现没有存档点。整个项目变成了一堆你看不懂的代码，因为你参与的只有"说了一句需求"。

我见过不止一个人做到一半完全推翻重来的。

所以工具效率高的前提是你得先把刹车装好：

```bash
# 每次 AI 动完先看改了哪些文件
git status && git diff
# 一个功能一个 commit，多打存档
git add . && git commit -m "feat: 登录接口初版"
# 大改之前开分支
git switch -c feature/xxx
```

写崩了？主线干干净净：
```bash
git switch main && git branch -D feature/xxx
```

这不是 Git 教程。这是活命手册。

---

## 给 AI 写"施工图纸"，比学 Prompt 重要

我几乎不花时间研究怎么写更好的 prompt。但我每个项目根目录都有一个 CLAUDE.md。

里面写的是：
- 技术栈版本（FastAPI、SQLAlchemy、Next.js、Tailwind）
- 目录分层规范
- 代码风格（比如"注释全用英文"、"禁止 SELECT *"）
- 明确禁止的做法

这个文件的效果比你苦思冥想一个完美的 prompt 要强得多。

为什么？因为它是持久的。你下次打开 Claude Code，它记得这些规矩。AI 的上下文窗口有限，项目规矩文件是你绕过这个限制的方式。

做 Orion 通知网关的时候，我在 AGENTS.md 里写了整个项目宪法——目录结构、提交规范、AI 输出必须附带的设计文档格式。结果整个项目几十次提交，风格非常一致，review 也容易。

**你给 AI 的约束越明确，它的输出质量越高。**

---

## 实际工具怎么用

我用过的工具，说说真实感受，不吹不黑：

**Claude Code**：主力。适合做完整项目，理解代码库的能力最强，不需要你每次都解释上下文。配合 CLAUDE.md 规矩文件，写出来的东西基本能直接看。代价是贵一点，但省下来的时间完全值回来。

**Cursor**：日常 IDE 集成用。Tab 补全很顺手，改小 bug、写一个函数，不用切出去。但做大项目还是得上 Claude Code，因为 Cursor 的上下文感知比较弱。

**Codex**：跑批量任务用。给全项目加单元测试、统一变量命名、批量处理重复劳动，丢给它后台跑，回头看结果就行。这种"不紧急但必须做"的事，Codex 挺省事的。

---

## 一个真实案例：agentskill.work 半天上线

这是一个 GitHub Agent 技能目录站。从想法到上线，确实花了半天。

AI 做了：Next.js 前端、FastAPI 后端、GitHub API 抓取脚本、Docker Compose 配置、Nginx 反代。

我做了：
- 限流策略（GitHub API 有每小时调用上限，不控制会把站打挂）
- 降级方案（API 挂了，用上一次的缓存兜底）
- Docker 镜像代理配置（国内拉不到 hub.docker.com，要走华为云 SWR 镜像）
- Umami 统计埋点（得知道有没有人用）

AI 让"把代码写出来"这件事变得廉价。但"做对"这件事，成本一点没降——关键判断都得自己来，AI 不帮你负责。

---

## 使用姿势总结

用 AI 工具提高效率，本质上是这个公式：

> 产出 = AI 生成速度 × 你的审查能力 × 工程判断力

三个乘数，AI 只负责第一个。另外两个，得自己练。

具体来说：
1. 先装 Git 刹车，再让 AI 动手
2. 写项目规矩文件，比反复琢磨 prompt 有用
3. 需求先出设计文档，确认后再写代码（能提前暴露很多问题）
4. 竖切功能，一刀一个能跑的链路，验收一个交付一个
5. 最后，永远假设 AI 会犯错——git diff 必看

工具不难学。把上面这几件事做扎实了，用哪个工具效率都不会差。

---

*我是老拐，写了十几年代码的程序员。更多 AI 编程实战内容在我的博客：[yfge.github.io](https://yfge.github.io)*
